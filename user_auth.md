# 1. Авторизация пользователя

**Цель:**  
Подключить аккаунт пользователя в Telegram-боте к его профилю TMDb, чтобы импортировать и обновлять личные оценки фильмов.

**Выбранный метод:**  
Классический v3 authentication flow:  
request_token → ссылка на одобрение → session_id.

**Почему не v4 Read Access Token (Bearer):**  
- v4 не используется по решению проекта  
- v3 session_id позволяет в будущем добавить возможность выставлять оценки из бота (если потребуется)

**Процесс в боте:**
1. Пользователь нажимает «Подключить TMDb»
2. Бот генерирует request_token и выдаёт ссылку на одобрение
3. Пользователь подтверждает на сайте TMDb и возвращается в бот
4. Бот обменивает request_token на session_id
5. Сохраняет session_id в базу (таблица users)
6. Запускает импорт оценок (фоновая задача)

**Импорт оценок:**
- Эндпоинт: `/account/{account_id}/rated/movies?session_id=...`
- Пагинация по страницам
- Сохраняем rating (0.5–10.0), нормализуем при необходимости
- Поддержка повторного импорта по кнопке «Обновить»

**Статусы синхронизации (sync_status):**
- 0 — не начинали
- 1 — в очереди на импорт
- 2 — успешно завершён
- -1 — ошибка
